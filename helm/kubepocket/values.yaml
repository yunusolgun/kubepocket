# helm/kubepocket/values.yaml
# KubePocket v3.0.0

replicaCount: 1

image:
  repository: kubepocket/kubepocket
  tag: 3.0.0
  pullPolicy: IfNotPresent

imagePullSecrets: []
nameOverride: ""
fullnameOverride: ""

serviceAccount:
  create: true
  name: ""

clusterName: "default"
allowedOrigins: "http://localhost:3000"
logLevel: INFO

collector:
  interval: 300
  logLevel: INFO
  statsInterval: 3600

anomaly:
  enabled: true
  zScoreThreshold: 3.0
  minDataPoints: 10

forecast:
  enabled: true
  horizonDays: 7
  minConfidence: 0.5

# =============================================
# PostgreSQL (Bitnami subchart)
# enabled: true  → Helm ile otomatik kur
# enabled: false → externalDatabase ile harici DB kullan
# =============================================
postgresql:
  enabled: true

  image:
    tag: latest # Sabit — her kurulumda manuel geçmeye gerek yok

  auth:
    username: kubepocket
    password: kubepocket
    database: kubepocket

  primary:
    resources:
      requests:
        cpu: 100m
        memory: 256Mi
      limits:
        cpu: 500m
        memory: 512Mi
    persistence:
      enabled: true
      size: 10Gi

# Harici PostgreSQL (postgresql.enabled=false ise doldur)
externalDatabase:
  host: ""
  port: 5432
  username: kubepocket
  password: kubepocket
  database: kubepocket

service:
  apiPort: 8000
  metricsPort: 8001
  type: ClusterIP

resources:
  requests:
    memory: 512Mi
    cpu: 200m
  limits:
    memory: 1Gi
    cpu: 500m

nodeSelector: {}
tolerations: []
affinity: {}
podSecurityContext: {}
securityContext: {}

rbac:
  create: true
  extraRules: []

serviceMonitor:
  enabled: true
  interval: 30s
  scrapeTimeout: 10s
  labels: {}
  metricRelabelings: []

podDisruptionBudget:
  enabled: false
  minAvailable: 1

autoscaling:
  enabled: false
  minReplicas: 1
  maxReplicas: 3
  targetCPUUtilizationPercentage: 80

networkPolicy:
  enabled: false

podAnnotations: {}
podLabels: {}
priorityClassName: ""
terminationGracePeriodSeconds: 30
extraEnv: []
extraVolumes: []
extraVolumeMounts: []
watchNamespace: ""
